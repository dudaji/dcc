### chap.8 고성능 컴퓨터 시스템 구조

#### 8.1 병렬처리의 개념 및 필요성

 병렬 처리: 다수의 프로세서들을 이용하여 여러 프로그램들을 분담하여 동시에 처리하는 기술.

 필요 조건:

- 많은 수의 프로세서들로 하나의 시스템을 구성할 수 있도록, 작고 저렴하며 고속인 프로세서들의 사용이 가능해야 한다.
- 한 프로그램을 여러 개의 작은 부분들로 분할하는 것이 가능, 분할된 부분드를 병렬로 처리한 결과가 전체 프로그램을 순차적으로 처리한 경우와 동일한 결과를 얻을 수 있어야 함.
- 하나의 문제를 여러 개로 나눌 수 없는(순차적인 작업이 필요한 경우) 근본적으로 병렬 처리가 불가능 한 경우도 있다.

#### 8.2 병렬처리의 단위

 병렬 처리를 하는 단위에 따라 나뉘어 진다.

- 작업-단위 병렬성: 독립적인 작업 프로그램 단위
- 테스크-단위 병렬성: 하나의 큰 작업 프로그램을 내부적으로 서로 다른 기능을 수행하는 더 작은 프로그램으로 구분하여 병렬처리 하는 단위
- 스레드-단위 병렬성(멀티 스레딩): 동시에 처리될 수 있는 가장 작은 크기의 독립적인 단위 프로그램
- 명령어-단위 병렬성: 슈퍼스칼라



#### 8.3 병렬컴퓨터의 분류

**8.3.1 Flynn의 분류**

1. 단일 명령어 스트림-단일 데이터 스트림(SISD): 한 번에 하나씩 명령어, 데이터 처리. 파이프라이닝.
2. 단일 명령어 스트림-복수 데이터 스트림(SIMD): 여러 개의 데이터들에 대한 연산을 동시에 처리
3. 복수 명령어 스트림-단일 데이터 스트림(MISD): 프로세서들이 배열 형태로 연결되고 한 프로세서가 처리한 결과가 다음 프로세서로 보내져 다른 연산이 수행되는 방식, 실제로 적용 X
4. 복수 명령어 스트림-복수 데이터 스트림(MIMD): 여러 프로세서가 여러 데이터들을 동시에 처리★
   - 밀결합: 프로세서간의 상호작용이 많음.
   - 소결합: 프로세서간의 상호작용이 적음. 거의 독립적.



**8.3.2 기억장치 액세스 모델에 따른 분류**

- 균일 기억장치 액세스(UMA): 모든 프로세서들이 기억장치를 공유하며 액세스에 걸리는 시간도 같은 시스템 구조
- 불균일 기억장치 액세스(NUMA): 공유 기억장치들과 프로세서들 간의 거리에 따라 액세스 시간이 달라지는 시스템 구조
- 무-원격 기억장치 액세스: 프로게서들이 별도의 기억장치를 가지며, 공유 기억장치는 없는 구조.



**8.3.3 시스템 구성 방법에 따른 분류**

- 대칭적 다중프로세서: 프로세서들이 모든 시스템 자원들을 공유하며 동등한 권한을 가지는 시스템구조
- 대규모 병렬프로세서: 프로세서와 기억장치로 이루어지는 많은 수의 노드들로 구성, 자원 공유가 없는 시스템 구조
- 캐시-일관성 NUMA 시스템: 노드(UMA/NUMA)들에 포함된 모든 캐시들과 기억장치들 간에 데이터 일관성이 유지되는 분산-기억장치시스템 구조
- 분산 시스템: 독립적인 컴퓨터시스템들이 전통적인 네트워크에 의해 연결된 컴퓨팅 환경
- 클러스터 컴퓨터: 고속 네트워크로 접속된 컴퓨터들의 집합체로서 단일 시스템 이미지를 가짐.



#### 8.4 다중프로세서시스템 구조

MIMD★ 조직의 다중프로세서 구조는 두 가지로 나뉜다.

**8.4.1 공유-기억장치 시스템 구조**

 밀결합 형태, 주기억장치가 어느 한 프로세서에 속하지 않고 모든 프로세서에 의해 공유됨.

- 장점: 
  1. 프로세서들이 공통으로 사용하는 데이터들이 공유 기억장치에 저장되므로, 별도의 프로세서 간 통신 메커니즘이 필요하지 않다.
  2. 프로그램 실행시간 동안에 각 프로세서들이 처리할 작업들을 동적으로 균등하게 할당할 수 있기 때문에, 프로세서 이용률을 극대화할 수 있어서 시스템 효율이 높아진다.
- 단점: 
  1. 프로세서들과 기억장치들 간의 버스에 통신량이 많아져서 지연시간 길어질 수 있다.
  2. 두 개 이상의 프로세서들이 공유자원을 동시에 사용하려는 경우 대기해야함.
- 결론: 프로세서 수가 증가하더라도 성능향상이 선형적으로 이루어지지 못함. 이를 해결하기 위해 여러 가지 방법들을 소개한다.
  - 버스:
    - 장점: 하드웨어 간단
    - 단점: 버스 경합 -> 지연시간 증가
  - 크로스바 스위치: 
    - 장점: 기억장치들 사이에 완전 연결성을 제공
    - 단점: 비용이 많이 들고 하드웨어가 복잡
  - 다단계 상호연결망: 여러 단계들을 통하여 노드들을 연결해주는 네트워크
    - 크로스바 스위치의 개념을 적용, 하드웨어의 복잡성을 낮춰줌

**8.4.2 분산-기억장치 시스템 구조**

1. 선형 배열 구조: ![](img/ch8_1.jpg)
2. 링 구조: ![](img/ch8_2.jpg)
3. 1. 트리 구조: ![](img/ch8_3.jpg)
   2. 팻 트리 구조: ![](img/ch8_4.jpg)
4. 매시 구조: ![](img/ch8_5.jpg) 
5. 하이퍼 큐브 구조: ![](img/ch8_6.jpg)





#### 8.5 클러스터 컴퓨터

 컴퓨터 클러스터링: 컴퓨터들을 네트워크와 미들웨어로 통합하여 병렬처리 노드들로 사용함으로써 프로세서 이용률을 높이는 기술

**8.5.1 클러스터 컴퓨터의 기본 구조**

 ![](img/ch8_7.jpg)

**8.5.2 클러스터 컴퓨터의 분류**

- 하드웨어 구성에 따른 분류:
  - PC 클러스터
  - 워크스테이션 클러스터
  - 다주읖로세서 클러스터
- 하드웨어, OS 에 따른 분류:
  - 동일형 클러스터: 모든 노드들이 유사한 하드웨어, 동일한 OS 탑재
  - 혼합형 클러스터: 혼합된 하드웨어, OS 탑재
- 클러스터 연결 매체에 따른 분류:
  - 개방형 클러스터: 외부에서도 이용 가능
  - 폐쇄형 클러스터: 외부와 차단
- 각 노드의 소유권에 따른 분류
  - 전용 클러스터: 모든 시스템 자원들이 병렬컴퓨팅을 위해서 통합적으로만 사용
  - 비전용 클러스터: 노드 컴퓨터들이 각각 별도로 사용될 수도, 통합적 사용도 가능



**8.5.3 클러스터 미들웨어와 단일 시스템 이미지**

- SSI 인프라: 모든 시스템 자원들이 하나의 통합시스템으로서 사용될 수 있게 해주는 미들웨어 하부조직
- SA 인프라: 시스템의 부분적 결함 발생 시에도 계속 동작할 수 있게 해주는 미들웨어 하부조직

